<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
><head>
  <title>
    Kevin
   
  </title>

 

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.145.0"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta
    name="description"
    content="
      Less is More


    "
  />
  
  
  
  <link
    rel="stylesheet"
    href="/css/main.min.51423ad97099a08f3a20e16d238c13adae76db7dd5e1913789bdc81143ff4cc6.css"
    integrity="sha256-UUI62XCZoI86IOFtI4wTra52233V4ZE3ib3IEUP/TMY="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css"
    integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS&#43;yuWSR4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="/post/install-nextcloud-on-ubuntu-20.04-with-nginx/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.d0408165d31a17f17bba83038bf54e86121f85021bdf936382e636f0f77a952f.js"
    integrity="sha256-0ECBZdMaF/F7uoMDi/VOhhIfhQIb35NjguY28Pd6lS8="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.ea8ebe268922ef9849261a1312cd65b640595e65251ce4c00534a176afd1ac0c.js"
      integrity="sha256-6o6&#43;Joki75hJJhoTEs1ltkBZXmUlHOTABTShdq/RrAw="
      crossorigin="anonymous"
    ></script>

  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://example.com/images/site-feature-image.png">
  <meta name="twitter:title" content="Install NextCloud on Ubuntu 20.04 with Nginx ">
  <meta name="twitter:description" content="Less is More">



  


  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "post",
        "name": "Install NextCloud on Ubuntu 20.04 with Nginx ",
        "headline": "Install NextCloud on Ubuntu 20.04 with Nginx ",
        "alternativeHeadline": "",
        "description": "
      
        


      


    ",
        "inLanguage": "en",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/example.com\/post\/install-nextcloud-on-ubuntu-20.04-with-nginx\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Kevin"
        },
        "creator" : {
            "@type": "Person",
            "name": "Kevin"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Kevin"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Kevin"
        },
        "copyrightYear" : "2022",
        "dateCreated": "2022-02-15T21:16:59.00Z",
        "datePublished": "2022-02-15T21:16:59.00Z",
        "dateModified": "2022-02-15T21:16:59.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Kevin",
            "url": "https://example.com/",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/example.com\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "https://example.com/images/site-feature-image.png"


      
      ]

    ,
        "url" : "https:\/\/example.com\/post\/install-nextcloud-on-ubuntu-20.04-with-nginx\/",
        "wordCount" : "656",
        "genre" : [ ],
        "keywords" : [ ]
    }
  </script>



</head>
<body>
    <header><div
  class="page-top 
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
  <nav>
    <ul class="nav__list" id="navMenu">
      <div class="nav__links">
        
        
          
          <li>
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/post/"
              
              title=""
              >Posts</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/about/"
              
              title=""
              >About</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/connect/"
              
              title=""
              >Connect</a
            >
          </li>

        
        
      </div>
      <li>
        
          <a class="theme-switch" title="Switch Theme">
            <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
          </a>

        
      </li>
    </ul>
  </nav>
</div>
</header>
    <div class="wrapper">
      <aside><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    
    
    <div class="logo-title">
      <div class="title">
        <img src="/images/profile.jpg" alt="profile picture" />
        <h3 title=""><a href="/">Kevin</a></h3>
        <div class="description">
          <p>Less is More</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
      
        <li>
          <a href="https://github.com/imkevinliao/imkevinliao.github.io" rel="me" aria-label="GitHub">
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="mailto:im.kevinliao@gmail.com" rel="me" aria-label="e-mail">
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer--sidebar">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          2020-2025

        
      </li>
      
        <li class="footer__item">
          <a
            href="/imprint/"
            
            title=""
          >
            imprint
          </a>
        </li>

      
    </ul>
  </div>

</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js"
    integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main>
        <div class="autopagerize_page_element">
          <div class="content">

  <div
    class="post 
      animated fadeInDown

    "
  >
    <div class="post-content">
      
      <div class="post-title">
        <h1>Install NextCloud on Ubuntu 20.04 with Nginx </h1>
        
          <div class="info">
            <em class="fas fa-calendar-day"></em>
            <span class="date"
              >
                2022/02/15


              </span
            >
            <em class="fas fa-stopwatch"></em>
            <span class="reading-time">4-minute read</span>
          </div>

        
      </div><p>more details please click source:<a href="https://www.linuxbabe.com/ubuntu/install-nextcloud-ubuntu-20-04-nginx-lemp-stack">https://www.linuxbabe.com/ubuntu/install-nextcloud-ubuntu-20-04-nginx-lemp-stack</a></p>
<h1 id="whats-nextcloud">What’s NextCloud?</h1>
<p>NextCloud is a free open-source self-hosted cloud storage solution. It’s functionally similar to Dropbox. Proprietary cloud storage solutions (Dropbox, Google Drive, etc) are convenient, but at a price: they can be used to collect personal data because your files are stored on their computers. If you worried about privacy, you can switch to NextCloud, which you can install on your private home server or on a virtual private server (VPS). You can upload your files to your server via NextCloud and then sync those files to your desktop computer, laptop or smartphone. This way you have full control of your data.</p>
<h1 id="step-1-download-nextcloud-on-ubuntu-2004">Step 1: Download NextCloud on Ubuntu 20.04</h1>
<p>Log into your Ubuntu 20.04 server. Then download the NextCloud zip archive onto your server. The latest stable version is 21.0.1 at time of this writing. You may need to change the version number. Go to <a href="https://nextcloud.com/install">https://nextcloud.com/install</a> and click the download for server button to see the latest version.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">nextcloud</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">nextcloud</span><span class="o">-</span><span class="mf">21.0</span><span class="o">.</span><span class="mf">1.</span><span class="n">zip</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">unzip</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">unzip</span> <span class="n">nextcloud</span><span class="o">-</span><span class="mf">21.0</span><span class="o">.</span><span class="mf">1.</span><span class="n">zip</span> <span class="o">-</span><span class="n">d</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">chown</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span><span class="p">:</span><span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nextcloud</span><span class="o">/</span> <span class="o">-</span><span class="n">R</span>
</span></span></code></pre></div><h1 id="step-2-create-a-database-and-user-for-nextcloud-in-mariadb-database-server">Step 2: Create a Database and User for Nextcloud in MariaDB Database Server</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo mysql
</span></span><span class="line"><span class="cl">create database nextcloud;
</span></span><span class="line"><span class="cl">create user nextclouduser@localhost identified by &#39;your-password&#39;;
</span></span><span class="line"><span class="cl">grant all privileges on nextcloud.* to nextclouduser@localhost identified by &#39;your-password&#39;;
</span></span><span class="line"><span class="cl">flush privileges;
</span></span><span class="line"><span class="cl">exit;
</span></span></code></pre></div><h1 id="step-3-create-a-nginx-config-file-for-nextcloud">Step 3: Create a Nginx Config File for Nextcloud</h1>
<p>sudo vim /etc/nginx/conf.d/nextcloud.conf</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span> <span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span> <span class="p">[::]:</span><span class="mi">80</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_name</span> <span class="n">nextcloud</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Add headers to serve security related headers</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">-</span><span class="n">Options</span> <span class="n">nosniff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">XSS</span><span class="o">-</span><span class="n">Protection</span> <span class="s2">&#34;1; mode=block&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Robots</span><span class="o">-</span><span class="n">Tag</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Download</span><span class="o">-</span><span class="n">Options</span> <span class="n">noopen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Permitted</span><span class="o">-</span><span class="n">Cross</span><span class="o">-</span><span class="n">Domain</span><span class="o">-</span><span class="n">Policies</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">Referrer</span><span class="o">-</span><span class="n">Policy</span> <span class="n">no</span><span class="o">-</span><span class="n">referrer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">#I found this header is needed on Ubuntu, but not on Arch Linux. </span>
</span></span><span class="line"><span class="cl">    <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Frame</span><span class="o">-</span><span class="n">Options</span> <span class="s2">&#34;SAMEORIGIN&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Path to the root of your installation</span>
</span></span><span class="line"><span class="cl">    <span class="n">root</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nextcloud</span><span class="o">/</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">access_log</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nextcloud</span><span class="o">.</span><span class="n">access</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">error_log</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">nextcloud</span><span class="o">.</span><span class="n">error</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">=</span> <span class="o">/</span><span class="n">robots</span><span class="o">.</span><span class="n">txt</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">allow</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">log_not_found</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">access_log</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># The following 2 rules are only needed for the user_webfinger app.</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Uncomment it if you&#39;re planning to use this app.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># last;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">=</span> <span class="o">/.</span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="o">/</span><span class="n">carddav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">301</span> <span class="o">$</span><span class="n">scheme</span><span class="p">:</span><span class="o">//$</span><span class="n">host</span><span class="o">/</span><span class="n">remote</span><span class="o">.</span><span class="n">php</span><span class="o">/</span><span class="n">dav</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">=</span> <span class="o">/.</span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="o">/</span><span class="n">caldav</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="mi">301</span> <span class="o">$</span><span class="n">scheme</span><span class="p">:</span><span class="o">//$</span><span class="n">host</span><span class="o">/</span><span class="n">remote</span><span class="o">.</span><span class="n">php</span><span class="o">/</span><span class="n">dav</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~</span> <span class="o">/.</span><span class="n">well</span><span class="o">-</span><span class="n">known</span><span class="o">/</span><span class="n">acme</span><span class="o">-</span><span class="n">challenge</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">allow</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># set max upload size</span>
</span></span><span class="line"><span class="cl">    <span class="n">client_max_body_size</span> <span class="mi">512</span><span class="n">M</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">fastcgi_buffers</span> <span class="mi">64</span> <span class="mi">4</span><span class="n">K</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Disable gzip to avoid the removal of the ETag header</span>
</span></span><span class="line"><span class="cl">    <span class="n">gzip</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Uncomment if your server is build with the ngx_pagespeed module</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># This module is currently not supported.</span>
</span></span><span class="line"><span class="cl">    <span class="c1">#pagespeed off;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">error_page</span> <span class="mi">403</span> <span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="mf">403.</span><span class="n">php</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">error_page</span> <span class="mi">404</span> <span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="mf">404.</span><span class="n">php</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">rewrite</span> <span class="o">^</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="n">build</span><span class="o">|</span><span class="n">tests</span><span class="o">|</span><span class="n">config</span><span class="o">|</span><span class="n">lib</span><span class="o">|</span><span class="mi">3</span><span class="n">rdparty</span><span class="o">|</span><span class="n">templates</span><span class="o">|</span><span class="n">data</span><span class="p">)</span><span class="o">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">deny</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span>\<span class="o">.|</span><span class="n">autotest</span><span class="o">|</span><span class="n">occ</span><span class="o">|</span><span class="n">issue</span><span class="o">|</span><span class="n">indie</span><span class="o">|</span><span class="n">db_</span><span class="o">|</span><span class="n">console</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">deny</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="n">index</span><span class="o">|</span><span class="n">remote</span><span class="o">|</span><span class="n">public</span><span class="o">|</span><span class="n">cron</span><span class="o">|</span><span class="n">core</span><span class="o">/</span><span class="n">ajax</span><span class="o">/</span><span class="n">update</span><span class="o">|</span><span class="n">status</span><span class="o">|</span><span class="n">ocs</span><span class="o">/</span><span class="n">v</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">|</span><span class="n">updater</span><span class="o">/.+|</span><span class="n">ocs</span><span class="o">-</span><span class="n">provider</span><span class="o">/.+|</span><span class="n">core</span><span class="o">/</span><span class="n">templates</span><span class="o">/</span><span class="mi">40</span><span class="p">[</span><span class="mi">34</span><span class="p">])</span>\<span class="o">.</span><span class="n">php</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="o">$|/</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">include</span> <span class="n">fastcgi_params</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_split_path_info</span> <span class="o">^</span><span class="p">(</span><span class="o">.+</span>\<span class="o">.</span><span class="n">php</span><span class="p">)(</span><span class="o">/.*</span><span class="p">)</span><span class="o">$</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">try_files</span> <span class="o">$</span><span class="n">fastcgi_script_name</span> <span class="o">=</span><span class="mi">404</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_param</span> <span class="n">SCRIPT_FILENAME</span> <span class="o">$</span><span class="n">document_root</span><span class="o">$</span><span class="n">fastcgi_script_name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_param</span> <span class="n">PATH_INFO</span> <span class="o">$</span><span class="n">fastcgi_path_info</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="c1">#Avoid sending the security headers twice</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_param</span> <span class="n">modHeadersAvailable</span> <span class="bp">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_param</span> <span class="n">front_controller_active</span> <span class="bp">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_pass</span> <span class="n">unix</span><span class="p">:</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">php</span><span class="o">/</span><span class="n">php7</span><span class="o">.</span><span class="mi">4</span><span class="o">-</span><span class="n">fpm</span><span class="o">.</span><span class="n">sock</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_intercept_errors</span> <span class="n">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">fastcgi_request_buffering</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~</span> <span class="o">^/</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="n">updater</span><span class="o">|</span><span class="n">ocs</span><span class="o">-</span><span class="n">provider</span><span class="p">)(</span><span class="err">?</span><span class="p">:</span><span class="o">$|/</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span><span class="o">/</span> <span class="o">=</span><span class="mi">404</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="n">index</span> <span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Adding the cache control header for js and css files</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Make sure it is BELOW the PHP block</span>
</span></span><span class="line"><span class="cl">    <span class="n">location</span> <span class="o">~*</span> \<span class="o">.</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="n">css</span><span class="o">|</span><span class="n">js</span><span class="p">)</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="o">$</span><span class="n">uri</span><span class="o">$</span><span class="n">is_args</span><span class="o">$</span><span class="n">args</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">Cache</span><span class="o">-</span><span class="ne">Control</span> <span class="s2">&#34;public, max-age=7200&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Add headers to serve security related headers (It is intended to</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># have those duplicated to the ones above)</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="o">-</span><span class="n">Options</span> <span class="n">nosniff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">XSS</span><span class="o">-</span><span class="n">Protection</span> <span class="s2">&#34;1; mode=block&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Robots</span><span class="o">-</span><span class="n">Tag</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Download</span><span class="o">-</span><span class="n">Options</span> <span class="n">noopen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">X</span><span class="o">-</span><span class="n">Permitted</span><span class="o">-</span><span class="n">Cross</span><span class="o">-</span><span class="n">Domain</span><span class="o">-</span><span class="n">Policies</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">add_header</span> <span class="n">Referrer</span><span class="o">-</span><span class="n">Policy</span> <span class="n">no</span><span class="o">-</span><span class="n">referrer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Optional: Don&#39;t log access to assets</span>
</span></span><span class="line"><span class="cl">        <span class="n">access_log</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="n">location</span> <span class="o">~*</span> \<span class="o">.</span><span class="p">(</span><span class="err">?</span><span class="p">:</span><span class="n">svg</span><span class="o">|</span><span class="n">gif</span><span class="o">|</span><span class="n">png</span><span class="o">|</span><span class="n">html</span><span class="o">|</span><span class="n">ttf</span><span class="o">|</span><span class="n">woff</span><span class="o">|</span><span class="n">ico</span><span class="o">|</span><span class="n">jpg</span><span class="o">|</span><span class="n">jpeg</span><span class="p">)</span><span class="o">$</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">try_files</span> <span class="o">$</span><span class="n">uri</span> <span class="o">/</span><span class="n">index</span><span class="o">.</span><span class="n">php</span><span class="o">$</span><span class="n">uri</span><span class="o">$</span><span class="n">is_args</span><span class="o">$</span><span class="n">args</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Optional: Don&#39;t log access to other assets</span>
</span></span><span class="line"><span class="cl">        <span class="n">access_log</span> <span class="n">off</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">nginx</span> <span class="o">-</span><span class="n">t</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">reload</span> <span class="n">nginx</span>
</span></span></code></pre></div><h1 id="step-4-install-and-enable-php-modules">Step 4: Install and Enable PHP Modules</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo apt install imagemagick php-imagick php7.4-common php7.4-mysql php7.4-fpm php7.4-gd php7.4-json php7.4-curl  php7.4-zip php7.4-xml php7.4-mbstring php7.4-bz2 php7.4-intl php7.4-bcmath php7.4-gmp
</span></span></code></pre></div><h1 id="step-5-enable-https">Step 5: Enable HTTPS</h1>
<h1 id="step-6-finish-the-installation-in-your-web-browser">Step 6: Finish the Installation in your Web Browser</h1>
<p>Now you can access the Nextcloud web install wizard using HTTPS connection.</p>
<p><a href="https://nextcloud.example.com">https://nextcloud.example.com</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo mkdir /usr/share/nginx/nextcloud-data
</span></span><span class="line"><span class="cl">sudo chown www-data:www-data /usr/share/nginx/nextcloud-data -R
</span></span></code></pre></div><h1 id="how-to-reset-nextcloud-user-password-from-command-line">How to Reset Nextcloud User Password From Command Line</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo -u www-data php /usr/share/nginx/nextcloud/occ user:resetpassword nextcloud_username
</span></span></code></pre></div></div>
    <div class="post-footer">
      <div class="info">
        

        
      </div>
    </div>

    
  </div>


          </div>
        </div>
      </main>
    </div><footer class="footer footer--base">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          2020-2025

        
      </li>
      
        <li class="footer__item">
          <a
            href="/imprint/"
            
            title=""
          >
            imprint
          </a>
        </li>

      
    </ul>
  </div>

</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.44288fd315b6cda68c1f4743caad56535c0f81a5b5a672f385e82b3896575c1d.js"
    integrity="sha256-RCiP0xW2zaaMH0dDyq1WU1wPgaW1pnLzhegrOJZXXB0="
    crossorigin="anonymous"
  ></script></body>
</html>
